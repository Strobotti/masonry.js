!function(r){r.fn.masonry=function(t){function s(t){return parseInt(r(t).attr("width"))}function e(t){return parseInt(r(t).attr("height"))}var o=r.extend({startOffset:0,rowMinAspectRatio:3.5,borderWidth:0,borderColor:"#fff"},t);r(this).css("line-height",0).css("white-space","nowrap").css("overflow-x","hidden");for(var i=r(this).find("img"),a=o.startOffset,n=r(this).innerWidth()-(parseInt(r(this).css("padding-left").replace("px",""))+parseInt(r(this).css("padding-right").replace("px","")));a<i.length;a++){var d=0,h=0,c=a-1,l=1;do c++,d+=s(i[c]),h=Math.max(h,e(i[c]));while(n>d&&c<=i.length);l=Math.max(l,c-a),d=0,h=0,c=a-1;do c++,d+=s(i[c]),h=Math.max(h,e(i[c])),l=Math.max(l,c-a);while(d/h<o.rowMinAspectRatio&&c<i.length);for(var p=0,f=0;l>f;f++)p+=s(i[a+f])/e(i[a+f]);for(r(i[a]).parent().css("clear","left").css("display","inline-block"),f=0;l>f;f++){var b=s(i[a+f])/e(i[a+f])/p*100;r(i[a+f]).css("max-width","99.9%").css("height","auto").css("display","inline-block"),r(i[a+f]).css("border-top",Math.round(o.borderWidth/2)+"px"),r(i[a+f]).css("border-right",Math.round(o.borderWidth)+"px"),r(i[a+f]).css("border-bottom",Math.round(o.borderWidth/2)+"px"),r(i[a+f]).css("border-left",Math.round(o.borderWidth)+"px"),r(i[a+f]).css("border-color",o.borderColor).css("border-style","solid"),b=Math.floor(100*b)/100,r(i[a+f]).parent().css("width",b+"%")}a+=l-1}return this}}(jQuery);
